import{chrome}from"../../../utils/polyfill.ts";import{Mv3UserBlocksHandler}from"./user-blocks-mv3";import{Mv2UserBlocksHandler}from"./user-blocks-mv2.js";const isMV3=3===chrome.runtime.getManifest().manifest_version;export const userBlocksHandler=new Mv3UserBlocksHandler;const mv2UserBlocksHandler=new Mv2UserBlocksHandler;export async function migrateUserBlocksToMV3(){if(console.debug("MV3_UserBlocks_Migrate: Migrating to MV3"),isMV3)try{const e=await mv2UserBlocksHandler.getBlockedItems();console.debug("MV3_UserBlocks_Migrate: Migrating user blocks",e),await userBlocksHandler.blockItems(e),console.debug("MV3_UserBlocks_Migrate: Migrated user blocks",e)}catch(e){console.error("MV3_UserBlocks_Migrate: Error migrating user blocks",e)}}